<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Document</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <h1>Flask Bookshelf!</h1>
        <div class="button-container">
        <form action="/save" method="post">
            <button type="submit">Save Books</button>
        </form>
    </div>

    <form action="/add_book" method="POST">
        <input type="text" name="title" placeholder="enter book title" required>
        <button type="submit">Add Book</button>
    </form>
    <ul>
        {% for book in books %}
            <li>
                {{ book.title }} - read {{ book.times_read }} time(s)

                <form action="/mark_read" method="POST" style="display:inline;">
                    <input type="hidden" name="title" value="{{ book.title }}">
                    <button type="submit">mark as read</button>
                </form>
                <form action="/delete_book" method="POST" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this book?');">
                    <input type="hidden" name="title" value="{{ book.title }}">
                    <button type="submit">delete</button>
                </form>

                <!-- Edit button -->
                <button type="button" onclick="toggleEditForm({{ loop.index }})">Edit</button>

                <!-- Hidden edit form -->
                <form id="edit-form-{{ loop.index }}" action="/edit_book" method="post" style="display:none; margin-top:5px;">
                    <input type="hidden" name="old_title" value="{{ book.title }}">
                    <input type="text" name="new_title" value="{{ book.title }}" required>
                    <button type="submit">Save</button>
                </form>
            </li>
        {% endfor %}
    </ul>
    <div class="button-container">
        <form action="/save" method="post">
            <button type="submit">Save Books</button>
        </form>
    </div>

    <script src="{{ url_for('static', filename='scripts.js') }}"></script>
</body>
</html>
